# å¡å¯†ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–å»ºè®®

## ğŸ“Š æ•°æ®åº“ä¼˜åŒ–

### 1. ç´¢å¼•ä¼˜åŒ–
å·²æ·»åŠ çš„ç´¢å¼•ï¼š
- `cards.product_id` - å•†å“ç­›é€‰æŸ¥è¯¢
- `cards.status` - çŠ¶æ€ç­›é€‰æŸ¥è¯¢  
- `cards.create_time` - æ—¶é—´æ’åºæŸ¥è¯¢
- `products.status` - å•†å“çŠ¶æ€æŸ¥è¯¢
- `products.sort_order` - å•†å“æ’åºæŸ¥è¯¢

### 2. æŸ¥è¯¢ä¼˜åŒ–å»ºè®®
```sql
-- ä¸ºé«˜é¢‘æŸ¥è¯¢æ·»åŠ å¤åˆç´¢å¼•
ALTER TABLE cards ADD INDEX idx_status_product (status, product_id);
ALTER TABLE cards ADD INDEX idx_create_time_status (create_time, status);

-- ä¸ºAPIéªŒè¯æŸ¥è¯¢ä¼˜åŒ–
ALTER TABLE cards ADD INDEX idx_encrypted_status (encrypted_key, status);
```

### 3. æ•°æ®æ¸…ç†
```sql
-- å®šæœŸæ¸…ç†è¿‡æœŸçš„å·²ä½¿ç”¨å¡å¯†ï¼ˆå¯é€‰ï¼‰
DELETE FROM cards 
WHERE status = 1 
AND card_type = 'time' 
AND expire_time < DATE_SUB(NOW(), INTERVAL 30 DAY);
```

## ğŸš€ åº”ç”¨å±‚ä¼˜åŒ–

### 1. ç¼“å­˜ç­–ç•¥
- å•†å“åˆ—è¡¨ç¼“å­˜ï¼ˆRedis/Memcachedï¼‰
- APIéªŒè¯ç»“æœçŸ­æœŸç¼“å­˜
- ç»Ÿè®¡æ•°æ®ç¼“å­˜

### 2. åˆ†é¡µä¼˜åŒ–
- å½“å‰å®ç°ï¼šLIMIT + OFFSET
- å»ºè®®ï¼šæ¸¸æ ‡åˆ†é¡µï¼ˆåŸºäºIDæˆ–æ—¶é—´æˆ³ï¼‰

```php
// ä¼˜åŒ–åçš„åˆ†é¡µæŸ¥è¯¢
$stmt = $conn->prepare("
    SELECT c.*, p.name as product_name 
    FROM cards c 
    LEFT JOIN products p ON c.product_id = p.id 
    WHERE c.id < ? 
    ORDER BY c.id DESC 
    LIMIT ?
");
```

### 3. æ‰¹é‡æ“ä½œä¼˜åŒ–
- æ‰¹é‡æ’å…¥å¡å¯†
- æ‰¹é‡æ›´æ–°çŠ¶æ€
- äº‹åŠ¡å¤„ç†

## ğŸ”§ å‰ç«¯ä¼˜åŒ–

### 1. èµ„æºä¼˜åŒ–
- CSS/JSæ–‡ä»¶å‹ç¼©
- å›¾ç‰‡ä¼˜åŒ–
- CDNä½¿ç”¨

### 2. äº¤äº’ä¼˜åŒ–
- æ‡’åŠ è½½è¡¨æ ¼æ•°æ®
- è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®é‡ï¼‰
- é˜²æŠ–æœç´¢

### 3. ç¼“å­˜ç­–ç•¥
- æµè§ˆå™¨ç¼“å­˜
- LocalStorageç­›é€‰æ¡ä»¶
- Service Workerï¼ˆPWAï¼‰

## ğŸ“ˆ ç›‘æ§å’Œåˆ†æ

### 1. æ€§èƒ½ç›‘æ§
```sql
-- æ…¢æŸ¥è¯¢ç›‘æ§
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 1;
```

### 2. å…³é”®æŒ‡æ ‡
- æ•°æ®åº“æŸ¥è¯¢æ—¶é—´
- APIå“åº”æ—¶é—´
- é¡µé¢åŠ è½½æ—¶é—´
- å†…å­˜ä½¿ç”¨æƒ…å†µ

### 3. æ—¥å¿—åˆ†æ
- é”™è¯¯æ—¥å¿—
- è®¿é—®æ—¥å¿—
- æ€§èƒ½æ—¥å¿—

## ğŸ›¡ï¸ å®‰å…¨ä¼˜åŒ–

### 1. è¾“å…¥éªŒè¯
- å‚æ•°ç±»å‹æ£€æŸ¥
- SQLæ³¨å…¥é˜²æŠ¤
- XSSé˜²æŠ¤

### 2. è®¿é—®æ§åˆ¶
- APIå¯†é’¥ç®¡ç†
- ä¼šè¯å®‰å…¨
- CSRFé˜²æŠ¤

### 3. æ•°æ®ä¿æŠ¤
- æ•æ„Ÿæ•°æ®åŠ å¯†
- ä¼ è¾“åŠ å¯†ï¼ˆHTTPSï¼‰
- å¤‡ä»½åŠ å¯†

## ğŸ”„ æ‰©å±•æ€§å»ºè®®

### 1. æ¶æ„ä¼˜åŒ–
- è¯»å†™åˆ†ç¦»
- æ•°æ®åº“åˆ†ç‰‡
- å¾®æœåŠ¡æ¶æ„

### 2. è´Ÿè½½å‡è¡¡
- åº”ç”¨æœåŠ¡å™¨è´Ÿè½½å‡è¡¡
- æ•°æ®åº“è´Ÿè½½å‡è¡¡
- CDNåˆ†å‘

### 3. å®¹å™¨åŒ–éƒ¨ç½²
- Dockerä¼˜åŒ–
- Kubernetesç¼–æ’
- è‡ªåŠ¨æ‰©ç¼©å®¹

## ğŸ“‹ æ€§èƒ½æµ‹è¯•æ¸…å•

### 1. æ•°æ®åº“æ€§èƒ½
- [ ] æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’åˆ†æ
- [ ] ç´¢å¼•ä½¿ç”¨ç‡æ£€æŸ¥
- [ ] æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ
- [ ] è¿æ¥æ± é…ç½®ä¼˜åŒ–

### 2. åº”ç”¨æ€§èƒ½
- [ ] å†…å­˜ä½¿ç”¨åˆ†æ
- [ ] CPUä½¿ç”¨ç‡ç›‘æ§
- [ ] å“åº”æ—¶é—´æµ‹è¯•
- [ ] å¹¶å‘æ€§èƒ½æµ‹è¯•

### 3. å‰ç«¯æ€§èƒ½
- [ ] é¡µé¢åŠ è½½é€Ÿåº¦
- [ ] èµ„æºåŠ è½½ä¼˜åŒ–
- [ ] äº¤äº’å“åº”æ—¶é—´
- [ ] ç§»åŠ¨ç«¯é€‚é…

## ğŸ¯ ä¼˜åŒ–ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§
1. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
2. APIå“åº”æ—¶é—´ä¼˜åŒ–
3. å‰ç«¯åŠ è½½é€Ÿåº¦ä¼˜åŒ–

### ä¸­ä¼˜å…ˆçº§
1. ç¼“å­˜ç­–ç•¥å®æ–½
2. æ‰¹é‡æ“ä½œä¼˜åŒ–
3. ç›‘æ§ç³»ç»Ÿå»ºç«‹

### ä½ä¼˜å…ˆçº§
1. æ¶æ„é‡æ„
2. å®¹å™¨åŒ–éƒ¨ç½²
3. é«˜çº§å®‰å…¨ç‰¹æ€§

## ğŸ“Š é¢„æœŸæ•ˆæœ

### æ€§èƒ½æå‡ç›®æ ‡
- æ•°æ®åº“æŸ¥è¯¢æ—¶é—´ï¼š< 100ms
- APIå“åº”æ—¶é—´ï¼š< 200ms
- é¡µé¢åŠ è½½æ—¶é—´ï¼š< 2s
- å¹¶å‘å¤„ç†èƒ½åŠ›ï¼š1000+ req/s

### ç”¨æˆ·ä½“éªŒæ”¹å–„
- æ›´å¿«çš„é¡µé¢å“åº”
- æ›´æµç•…çš„äº¤äº’
- æ›´ç¨³å®šçš„ç³»ç»Ÿ
- æ›´å¥½çš„ç§»åŠ¨ç«¯ä½“éªŒ

## ğŸ” ç›‘æ§å·¥å…·æ¨è

### æ•°æ®åº“ç›‘æ§
- MySQL Performance Schema
- Percona Monitoring and Management
- phpMyAdmin

### åº”ç”¨ç›‘æ§
- New Relic
- Datadog
- Prometheus + Grafana

### å‰ç«¯ç›‘æ§
- Google PageSpeed Insights
- GTmetrix
- WebPageTest

---

*æ³¨æ„ï¼šå®æ–½ä¼˜åŒ–æ—¶è¯·å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ï¼Œç¡®ä¿ä¸å½±å“ç°æœ‰åŠŸèƒ½ã€‚*
